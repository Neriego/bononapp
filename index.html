<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BononaMovie | Pelis para Ver Juntos üçø</title>
    <meta name="description" content="App de pel√≠culas para Ger y Magui. Favoritos, ranking y votos semanales.">

    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="logo.jpg">
    <link rel="shortcut icon" type="image/jpeg" href="logo.jpg">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">

    <!-- iOS Add to Home Screen -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="BononaMovie">
    <link rel="apple-touch-icon" href="logo.jpg">

    <!-- Android/Chrome -->
    <meta name="mobile-web-app-capable" content="yes">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'dark': {
                            900: '#000000',
                            800: '#12121a',
                            700: '#1a1a25',
                            600: '#252533',
                        },
                        'accent': {
                            purple: '#a855f7',
                            pink: '#ec4899',
                            blue: '#3b82f6',
                            yellow: '#fbbf24',
                        }
                    }
                }
            }
        }
    </script>
</head>

<body class="font-inter bg-dark-900 text-white">
    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-dark-900 z-[100] flex items-center justify-center">
        <div class="p-8 max-w-sm w-full mx-4 text-center">
            <img src="logo.jpg" alt="BononaMovie"
                class="w-24 h-24 rounded-2xl mx-auto mb-6 object-cover shadow-lg shadow-accent-purple/30">
            <h2 class="text-2xl font-bold mb-2">¬°Hola! üëã</h2>
            <p class="text-gray-400 mb-8">¬øQui√©n va a elegir pelis hoy?</p>

            <div class="flex flex-col gap-3">
                <button onclick="login('Ger')"
                    class="w-full py-4 bg-gradient-to-r from-accent-purple to-accent-pink rounded-2xl font-semibold hover:scale-105 transition-transform">
                    üé¨ Soy Ger
                </button>
                <button onclick="login('Magui')"
                    class="w-full py-4 bg-gradient-to-r from-accent-pink to-accent-purple rounded-2xl font-semibold hover:scale-105 transition-transform">
                    üçø Soy Magui
                </button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden min-h-screen pb-20">

        <!-- Global Loader Overlay -->
        <div id="loaderOverlay"
            class="fixed inset-0 bg-dark-900/80 backdrop-blur-sm z-[200] flex items-center justify-center">
            <div class="w-12 h-12 border-4 border-accent-purple/30 border-t-accent-purple rounded-full animate-spin">
            </div>
        </div>

        <!-- Floating Votes Chip -->
        <div id="votesChip"
            class="fixed top-4 right-4 z-50 px-3 py-2 bg-dark-800/90 backdrop-blur-lg border border-accent-yellow/30 rounded-full flex items-center gap-2 shadow-lg">
            <span class="text-accent-yellow text-sm">üó≥Ô∏è</span>
            <span id="votesChipCount" class="text-sm font-medium text-accent-yellow">5 votos</span>
        </div>

        <!-- Home View -->
        <div id="homeView">
            <!-- Hero Section - Featured Movie -->
            <section id="heroSection" class="relative">
                <div id="heroContent" class="relative">
                    <!-- Hero image and content injected by JS -->
                </div>
            </section>

            <!-- Pr√≥ximas Pel√≠culas (Ranking Preview) -->
            <section class="px-4 py-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-xl font-bold">Pr√≥ximas pel√≠culas</h2>
                    <button onclick="showRankingView()" class="text-accent-yellow text-sm font-medium">Ver
                        ranking</button>
                </div>
                <div id="rankingCarousel" class="flex gap-3 overflow-x-auto pb-2 scrollbar-hide">
                    <!-- Ranking movies injected by JS -->
                </div>
            </section>

            <!-- Favoritos del otro usuario -->
            <section class="px-4 py-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 id="favoritosTitle" class="text-xl font-bold">Favoritos de Magui</h2>
                    <button id="verFavoritosBtn" onclick="showOtherUserFavorites()"
                        class="text-accent-yellow text-sm font-medium">Ver listado</button>
                </div>
                <div id="favoritosCarousel" class="flex gap-3 overflow-x-auto pb-2 scrollbar-hide">
                    <!-- Other user's favorites injected by JS -->
                </div>
            </section>
        </div>

        <!-- Search View -->
        <!-- Search View -->
        <div id="searchView" class="hidden flex flex-col h-screen">
            <!-- Header with Input -->
            <!-- Header with Input -->
            <div class="sticky top-0 z-40 bg-dark-900 px-4 py-3 border-b border-white/5 flex items-center gap-3">
                <button onclick="navigateBack()" class="w-10 h-10 flex items-center justify-center -ml-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                </button>
                <div class="relative flex-1">
                    <svg class="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-500" fill="none"
                        stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <input type="text" id="searchInput" placeholder="Buscar pel√≠culas..."
                        class="w-full pl-12 pr-4 h-10 bg-dark-700 border border-white/10 rounded-2xl text-white placeholder-gray-500 focus:outline-none focus:border-accent-purple/50">
                </div>
            </div>

            <!-- Results -->
            <div id="searchResults" class="flex-1 overflow-y-auto px-4 py-4 pb-20">
                <p class="text-center text-gray-500 py-8">Escrib√≠ el nombre de una pel√≠cula para agregar al ranking</p>
            </div>
        </div>

        <!-- Ranking View -->
        <div id="rankingView" class="hidden">
            <div class="sticky top-0 z-40 bg-dark-900/95 backdrop-blur border-b border-white/5 pb-2">
                <div class="px-4 py-3 flex items-center gap-3">
                    <button onclick="navigateBack()" class="w-10 h-10 flex items-center justify-center -ml-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                            </path>
                        </svg>
                    </button>
                    <h1 class="text-xl font-bold">üèÜ Ranking</h1>
                    <span id="rankingTotalVotes" class="ml-auto text-sm text-gray-400"></span>
                </div>

                <!-- Filters -->
                <div class="px-4 flex gap-2 overflow-x-auto scrollbar-hide">
                    <button onclick="setRankingFilter('all')" id="filter-all"
                        class="px-3 py-1.5 rounded-full text-xs font-medium bg-white text-dark-900 border border-white transition-colors">
                        Todos
                    </button>
                    <button onclick="setRankingFilter('Ger')" id="filter-Ger"
                        class="px-3 py-1.5 rounded-full text-xs font-medium bg-dark-700 text-gray-400 border border-transparent transition-colors">
                        Ger
                    </button>
                    <button onclick="setRankingFilter('Magui')" id="filter-Magui"
                        class="px-3 py-1.5 rounded-full text-xs font-medium bg-dark-700 text-gray-400 border border-transparent transition-colors">
                        Magui
                    </button>
                </div>
            </div>
            <div id="rankingGrid" class="grid grid-cols-2 gap-3 p-4">
                <!-- Full ranking grid injected by JS -->
            </div>
        </div>

        <!-- Movie Detail View -->
        <div id="movieDetailView" class="hidden">
            <div id="movieDetailContent">
                <!-- Movie details injected by JS -->
            </div>
        </div>

        <!-- Wishlist View (My Favorites) -->
        <div id="wishlistView" class="hidden">
            <div class="sticky top-0 z-40 bg-dark-900 px-4 py-3 flex items-center gap-3 border-b border-transparent">
                <button onclick="navigateBack()" class="w-10 h-10 flex items-center justify-center -ml-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                </button>
                <h1 class="text-xl font-bold">Mi Lista</h1>
            </div>
            <div id="wishlistGrid" class="grid grid-cols-2 gap-3 p-4">
                <!-- My added movies grid -->
            </div>
        </div>

        <!-- Profile/Settings View -->
        <div id="profileView" class="hidden">
            <div class="sticky top-0 z-40 bg-dark-900 px-4 py-3 flex items-center gap-3 border-b border-transparent">
                <button onclick="navigateBack()" class="w-10 h-10 flex items-center justify-center -ml-2">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7">
                        </path>
                    </svg>
                </button>
                <h1 class="text-xl font-bold">‚öôÔ∏è Configuraci√≥n</h1>
            </div>
            <div class="p-4">
                <!-- User Info -->
                <div class="bg-dark-700 rounded-2xl p-4 mb-4">
                    <div class="flex items-center gap-4 mb-4">
                        <div class="w-16 h-16 bg-gradient-to-br from-accent-purple to-accent-pink rounded-full flex items-center justify-center text-2xl font-bold"
                            id="profileAvatar">G</div>
                        <div>
                            <p id="profileName" class="text-xl font-bold">Ger</p>
                            <p id="profileVotes" class="text-accent-yellow">5 votos restantes</p>
                        </div>
                    </div>
                </div>

                <!-- Votes Management -->
                <div id="votesManagementSection" class="bg-dark-700 rounded-2xl p-4 mb-4">
                    <h3 class="font-semibold mb-4">Gesti√≥n de Votos</h3>

                    <div class="flex items-center justify-between py-3 border-b border-white/10">
                        <div>
                            <p class="font-medium">Ger</p>
                            <p id="gerVotesDisplay" class="text-sm text-gray-400">5 votos</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="adjustVotes('Ger', -1)"
                                class="w-10 h-10 bg-red-500/20 text-red-400 rounded-xl font-bold">‚àí</button>
                            <button onclick="adjustVotes('Ger', 1)"
                                class="w-10 h-10 bg-green-500/20 text-green-400 rounded-xl font-bold">+</button>
                        </div>
                    </div>

                    <div class="flex items-center justify-between py-3">
                        <div>
                            <p class="font-medium">Magui</p>
                            <p id="maguiVotesDisplay" class="text-sm text-gray-400">5 votos</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <button onclick="adjustVotes('Magui', -1)"
                                class="w-10 h-10 bg-red-500/20 text-red-400 rounded-xl font-bold">‚àí</button>
                            <button onclick="adjustVotes('Magui', 1)"
                                class="w-10 h-10 bg-green-500/20 text-green-400 rounded-xl font-bold">+</button>
                        </div>
                    </div>
                </div>

                <!-- Admin Actions -->
                <div id="adminActionsSection" class="bg-dark-700 rounded-2xl p-4 mb-4">
                    <button onclick="resetRanking()"
                        class="w-full py-3 bg-red-500/20 text-red-400 rounded-xl font-medium">
                        üóëÔ∏è Borrar Todo el Ranking
                    </button>
                </div>

                <!-- General Actions -->
                <div class="bg-dark-700 rounded-2xl p-4 mb-4">
                    <button onclick="logout()" class="w-full py-3 bg-dark-600 rounded-xl font-medium">
                        üëã Cambiar Usuario
                    </button>
                </div>
            </div>
        </div>

        <!-- Actor Detail View -->
        <div id="actorDetailView" class="hidden pb-20">
            <!-- Content injected by JS -->
        </div>

        <!-- Bottom Navigation -->
        <nav class="fixed bottom-0 left-0 right-0 bg-dark-900 border-t border-white/10 z-50">
            <div class="flex items-center justify-around py-2">
                <button onclick="showHomeView()" class="nav-item flex flex-col items-center gap-1 px-4 py-2"
                    id="navHome">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                    </svg>
                    <span class="text-xs">Home</span>
                </button>
                <button onclick="showSearchView()" class="nav-item flex flex-col items-center gap-1 px-4 py-2"
                    id="navSearch">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                    </svg>
                    <span class="text-xs">Buscar</span>
                </button>
                <button onclick="showRankingView()" class="nav-item flex flex-col items-center gap-1 px-4 py-2"
                    id="navRanking">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 002 2h2a2 2 0 002-2z">
                        </path>
                    </svg>
                    <span class="text-xs">Ranking</span>
                </button>
                <button onclick="showProfileView()" class="nav-item flex flex-col items-center gap-1 px-4 py-2"
                    id="navProfile">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    <span class="text-xs">Perfil</span>
                </button>
            </div>
        </nav>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCiAPu7IOzMGLkcr1NBNuIW_Wy_TvQunO8",
            authDomain: "bononapp.firebaseapp.com",
            databaseURL: "https://bononapp-default-rtdb.firebaseio.com",
            projectId: "bononapp",
            storageBucket: "bononapp.firebasestorage.app",
            messagingSenderId: "397524302059",
            appId: "1:397524302059:web:eafd1e897c0c3f64ee66ae"
        };
        firebase.initializeApp(firebaseConfig);
        window.db = firebase.database();
    </script>
    <script src="app.js"></script>
</body>

</html>